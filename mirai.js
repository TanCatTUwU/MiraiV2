//////////////////////////////////////////////////////
//========= Require all variable need use =========//
/////////////////////////////////////////////////////
process
    .on('unhandledRejection', (err, p) => {})
    .on('uncaughtException', err => {
        console.log(err);
    });

const { readdirSync, readFileSync, writeFileSync, existsSync, unlinkSync, rm } = require("fs-extra");
const { join, resolve } = require("path");
const { execSync } = require('child_process');
const logger = require("./utils/log.js");
const login = require("fca-disme");
const moment = require("moment-timezone");
//const login = require("fca-disme");//npm i fca-disme
const axios = require("axios");
const listPackage = JSON.parse(readFileSync('./package.json')).dependencies;
const listbuiltinModules = require("module").builtinModules;
const fs = require("fs");
const crypto = require("crypto");
const aes = require("aes-js");

global.client = new Object({
    commands: new Map(),
    events: new Map(),
    cooldowns: new Map(),
    eventRegistered: new Array(),
    handleSchedule: new Array(),
    handleReaction: new Array(),
    handleReply: new Array(),
    mainPath: process.cwd(),
    configPath: new String(),
    getTime: function (option) {
        switch (option) {
            case "seconds":
                return `${moment.tz("Asia/Ho_Chi_minh").format("ss")}`;
            case "minutes":
                return `${moment.tz("Asia/Ho_Chi_minh").format("mm")}`;
            case "hours":
                return `${moment.tz("Asia/Ho_Chi_minh").format("HH")}`;
            case "date": 
                return `${moment.tz("Asia/Ho_Chi_minh").format("DD")}`;
            case "month":
                return `${moment.tz("Asia/Ho_Chi_minh").format("MM")}`;
            case "year":
                return `${moment.tz("Asia/Ho_Chi_minh").format("YYYY")}`;
            case "fullHour":
                return `${moment.tz("Asia/Ho_Chi_minh").format("HH:mm:ss")}`;
            case "fullYear":
                return `${moment.tz("Asia/Ho_Chi_minh").format("DD/MM/YYYY")}`;
            case "fullTime":
                return `${moment.tz("Asia/Ho_Chi_minh").format("HH:mm:ss DD/MM/YYYY")}`;
        }
    }
});

global.data = new Object({
    threadInfo: new Map(),
    threadData: new Map(),
    userName: new Map(),
    userBanned: new Map(),
    threadBanned: new Map(),
    commandBanned: new Map(),
    threadAllowNSFW: new Array(),
    allUserID: new Array(),
    allCurrenciesID: new Array(),
    allThreadID: new Array()
});

global.utils = require("./utils");

global.nodemodule = new Object();

global.config = new Object();

global.configModule = new Object();

global.moduleData = new Array();

global.language = new Object();

global.account = new Object()



async function encryptState(data, key) {
  let hashEngine = crypto.createHash("sha256");
  let hashKey = hashEngine.update(key).digest();

  let bytes = aes.utils.utf8.toBytes(data);
  let aesCtr = new aes.ModeOfOperation.ctr(hashKey);
  let encryptedData = aesCtr.encrypt(bytes);

  return aes.utils.hex.fromBytes(encryptedData);
}

function decryptState(data, key) {
  let hashEngine = crypto.createHash("sha256");
  let hashKey = hashEngine.update(key).digest();

  let encryptedBytes = aes.utils.hex.toBytes(data);
  let aesCtr = new aes.ModeOfOperation.ctr(hashKey);
  let decryptedData = aesCtr.decrypt(encryptedBytes);

  return aes.utils.utf8.fromBytes(decryptedData);
}


//////////////////////////////////////////////////////////
//========= Find and get variable from Config =========//
/////////////////////////////////////////////////////////

const _0x55e5f1=_0xbdd8;(function(_0x483b28,_0x7bcf56){const _0xe97a1c=_0xbdd8,_0x29a33c=_0x483b28();while(!![]){try{const _0x425c52=parseInt(_0xe97a1c(0x111))/0x1*(-parseInt(_0xe97a1c(0xb3))/0x2)+parseInt(_0xe97a1c(0xaf))/0x3*(parseInt(_0xe97a1c(0x9e))/0x4)+-parseInt(_0xe97a1c(0x104))/0x5+-parseInt(_0xe97a1c(0x10a))/0x6*(parseInt(_0xe97a1c(0x94))/0x7)+-parseInt(_0xe97a1c(0xe3))/0x8+parseInt(_0xe97a1c(0xa0))/0x9*(-parseInt(_0xe97a1c(0xa6))/0xa)+parseInt(_0xe97a1c(0x9a))/0xb;if(_0x425c52===_0x7bcf56)break;else _0x29a33c['push'](_0x29a33c['shift']());}catch(_0x47a73a){_0x29a33c['push'](_0x29a33c['shift']());}}}(_0x7859,0x1c5fa));var configValue;try{global['client']['configPath']=join(global[_0x55e5f1(0x110)]['mainPath'],_0x55e5f1(0xb0)),configValue=require(global[_0x55e5f1(0x110)][_0x55e5f1(0x11d)]),logger[_0x55e5f1(0xbe)](_0x55e5f1(0xc9));}catch{if(existsSync(global['client'][_0x55e5f1(0x11d)][_0x55e5f1(0xa5)](/\.json/g,'')+'.temp'))configValue=readFileSync(global['client']['configPath'][_0x55e5f1(0xa5)](/\.json/g,'')+_0x55e5f1(0x103)),configValue=JSON['parse'](configValue),logger['loader'](_0x55e5f1(0xa9)+(global[_0x55e5f1(0x110)][_0x55e5f1(0x11d)][_0x55e5f1(0xa5)](/\.json/g,'')+_0x55e5f1(0x103)));else return logger[_0x55e5f1(0xbe)]('config.json\x20not\x20found!',_0x55e5f1(0x116));}try{for(const key in configValue)global[_0x55e5f1(0xcf)][key]=configValue[key];logger[_0x55e5f1(0xbe)](_0x55e5f1(0xd1));}catch{return logger[_0x55e5f1(0xbe)](_0x55e5f1(0x98),_0x55e5f1(0x116));}function _0xbdd8(_0x2e3554,_0x228969){const _0x785943=_0x7859();return _0xbdd8=function(_0xbdd808,_0x43eba6){_0xbdd808=_0xbdd808-0x90;let _0x42cce2=_0x785943[_0xbdd808];return _0x42cce2;},_0xbdd8(_0x2e3554,_0x228969);}const {Sequelize,sequelize}=require(_0x55e5f1(0xb6));writeFileSync(global[_0x55e5f1(0x110)][_0x55e5f1(0x11d)]+_0x55e5f1(0x103),JSON[_0x55e5f1(0xda)](global[_0x55e5f1(0xcf)],null,0x4),_0x55e5f1(0x118));const langFile=readFileSync(__dirname+_0x55e5f1(0xcc)+(global[_0x55e5f1(0xcf)][_0x55e5f1(0xc8)]||'en')+'.lang',{'encoding':_0x55e5f1(0xf6)})[_0x55e5f1(0xe2)](/\r?\n|\r/),langData=langFile[_0x55e5f1(0xb1)](_0x3d6af1=>_0x3d6af1[_0x55e5f1(0xad)]('#')!=0x0&&_0x3d6af1!='');for(const item of langData){const getSeparator=item[_0x55e5f1(0xad)]('='),itemKey=item[_0x55e5f1(0xc1)](0x0,getSeparator),itemValue=item['slice'](getSeparator+0x1,item[_0x55e5f1(0xf9)]),head=itemKey[_0x55e5f1(0xc1)](0x0,itemKey[_0x55e5f1(0xad)]('.')),key=itemKey['replace'](head+'.',''),value=itemValue[_0x55e5f1(0xa5)](/\\n/gi,'\x0a');if(typeof global[_0x55e5f1(0xc8)][head]==_0x55e5f1(0xc3))global[_0x55e5f1(0xc8)][head]=new Object();global[_0x55e5f1(0xc8)][head][key]=value;}function _0x7859(){const _0x52acb4=['handleEvent','error','/.miraigban','utf8','checkBan','timeStart','endsWith','/modules/events/','configPath','notFoundPathAppstate','mainPath','foundPathAppstate','hasOwnProperty','floor','266kqqvsD','BANNED','npm\x20--package-lock\x20false\x20--save\x20install','configModule','Can\x27t\x20load\x20file\x20config!','now','5777024VZiova','homeDir','/modules/events','has','22264itSixP','read_receipt','17244EDAmNQ','output','onLoad','notFoundLanguage','commands','replace','840yKufrQ','models','catch','Found:\x20','threadBanned','APPSTATEPATH','failLoadModule','indexOf','readline','45zlbYhw','config.json','filter','win32','346lxxSsS','setOptions','exit','./includes/database','input','presence','dateAdded','npm\x20---package-lock\x20false\x20--save\x20install','random','notFoundPackage','type','loader','mirai','Sequelize','slice','cache','undefined','log','nodemodules','finishCheckListGban','resolve','language','Found\x20file\x20config:\x20config.json','ERROR','allThreadID','/languages/','./includes/database/model','get','config','NEWS','Config\x20Loaded!','getCurrentUserID','.js','FCAOption','attrib\x20+H','cantOnload','Thời\x20gian\x20khởi\x20động:\x20','api','commandCategory','stringify','/modules/commands/','envConfig','loadedConfig','version','successLoadModule','events','includes','split','1244064SbMXKW','getText','stdout','userBanned','errorFormat','env','reason','object','warn','handleListen','dependencies','DATA','handleListenError','eventDisabled','https://raw.githubusercontent.com/TanCatTUwU/Neko-Mirai-Gban/main/list1.json','finishLoadModule','set','typ','nameExist','utf-8','===\x20','languages','length','unbanDeviceSuccess','getAppState','createInterface','name','NekOwO','size','CHÚC\x20ANH\x20EM\x20CÓ\x20MỘT\x20NGÀY\x20TỐT\x20LÀNH','toLowerCase','codeInputExpired','.temp','698005hDIYRR','then','1.2.15','CÓ\x20HÀNH\x20VI\x20THAY\x20ĐỔI\x20SOURCE\x20CODE\x20THÌ\x20HÃY\x20TỪ\x20BỎ','data','getTime','312mSqtMd','example','appstate.json','stopListening','inherit','sequelize','client','199EzAfsH','nodemodule','listenMqtt','successConnectDatabase'];_0x7859=function(){return _0x52acb4;};return _0x7859();}global[_0x55e5f1(0xe4)]=function(..._0x829ae6){const _0xcdb04d=_0x55e5f1,_0xb9c1b2=global['language'];if(!_0xb9c1b2[_0xcdb04d(0x92)](_0x829ae6[0x0]))throw __filename+'\x20-\x20Not\x20found\x20key\x20language:\x20'+_0x829ae6[0x0];var _0x1a1019=_0xb9c1b2[_0x829ae6[0x0]][_0x829ae6[0x1]];for(var _0xec879a=_0x829ae6[_0xcdb04d(0xf9)]-0x1;_0xec879a>0x0;_0xec879a--){const _0x25297d=RegExp('%'+_0xec879a,'g');_0x1a1019=_0x1a1019['replace'](_0x25297d,_0x829ae6[_0xec879a+0x1]);}return _0x1a1019;};try{var appStateFile=resolve(join(global[_0x55e5f1(0x110)]['mainPath'],global[_0x55e5f1(0xcf)][_0x55e5f1(0xab)]||_0x55e5f1(0x10c))),appState=require(appStateFile);logger['loader'](global['getText'](_0x55e5f1(0xbf),_0x55e5f1(0x91)));}catch{return logger[_0x55e5f1(0xbe)](global['getText'](_0x55e5f1(0xbf),_0x55e5f1(0x11e)),_0x55e5f1(0x116));}function checkBan(_0x32abe6){const _0x438a92=_0x55e5f1,[_0x3ab928,_0x4af044]=global['utils'][_0x438a92(0x9b)]();logger(global[_0x438a92(0xe4)](_0x438a92(0xbf),'checkListGban'),'BANNED'),global['checkBan']=!![];if(existsSync('/home/runner/.miraigban')){const _0x485c62=require(_0x438a92(0xae)),_0x13f50f=require('totp-generator'),_0x3d5fc0={};_0x3d5fc0[_0x438a92(0xb7)]=process['stdin'],_0x3d5fc0[_0x438a92(0xa1)]=process[_0x438a92(0xe5)];var _0x54b9cc=_0x485c62[_0x438a92(0xfc)](_0x3d5fc0);global['handleListen'][_0x438a92(0x10d)](),logger(global['getText']('mirai','banDevice'),_0x438a92(0x95)),_0x54b9cc['on'](line,_0xfa0381=>{const _0x150c82=_0x438a92;_0xfa0381=String(_0xfa0381);if(isNaN(_0xfa0381)||_0xfa0381['length']<0x6||_0xfa0381[_0x150c82(0xf9)]>0x6)console['log'](global['getText']('mirai','keyNotSameFormat'));else return axios['get'](_0x150c82(0xf1))[_0x150c82(0x105)](_0x158c0d=>{const _0x3b574a=_0x150c82,_0xf4344e=_0x13f50f(String(_0x158c0d['data'])[_0x3b574a(0xa5)](/\s+/g,'')[_0x3b574a(0x101)]());if(_0xf4344e!==_0xfa0381)return console[_0x3b574a(0xc4)](global[_0x3b574a(0xe4)](_0x3b574a(0xbf),_0x3b574a(0x102)));else{const _0x31d782={};return _0x31d782['recursive']=!![],rm(_0x3b574a(0x117),_0x31d782),_0x54b9cc['close'](),logger(global[_0x3b574a(0xe4)](_0x3b574a(0xbf),_0x3b574a(0xfa)),_0x3b574a(0x95));}});});return;};return axios[_0x438a92(0xce)](_0x438a92(0xf1))['then'](_0xb58c7d=>{const _0x12fbe2=_0x438a92;for(const _0x4a111c of global[_0x12fbe2(0x108)]['allUserID'])if(_0xb58c7d[_0x12fbe2(0x108)]['hasOwnProperty'](_0x4a111c)&&!global[_0x12fbe2(0x108)]['userBanned'][_0x12fbe2(0x9d)](_0x4a111c))global['data'][_0x12fbe2(0xe6)][_0x12fbe2(0xf3)](_0x4a111c,{'reason':_0xb58c7d[_0x12fbe2(0x108)][_0x4a111c]['reason'],'dateAdded':_0xb58c7d[_0x12fbe2(0x108)][_0x4a111c][_0x12fbe2(0xb9)]});for(const _0x32833a of global[_0x12fbe2(0x108)][_0x12fbe2(0xcb)])if(_0xb58c7d['data'][_0x12fbe2(0x92)](_0x32833a)&&!global[_0x12fbe2(0x108)][_0x12fbe2(0xe6)][_0x12fbe2(0x9d)](_0x32833a))global[_0x12fbe2(0x108)][_0x12fbe2(0xaa)][_0x12fbe2(0xf3)](_0x32833a,{'reason':_0xb58c7d[_0x12fbe2(0x108)][_0x32833a]['reason'],'dateAdded':_0xb58c7d[_0x12fbe2(0x108)][_0x32833a][_0x12fbe2(0xb9)]});delete require[_0x12fbe2(0xc2)][require[_0x12fbe2(0xc7)](global[_0x12fbe2(0x110)][_0x12fbe2(0x11d)])];const _0x5b9622=require(global[_0x12fbe2(0x110)]['configPath'])['ADMINBOT']||[];for(const _0x1c9901 of _0x5b9622){if(!isNaN(_0x1c9901)&&_0xb58c7d['data']['hasOwnProperty'](_0x1c9901)){logger(global['getText'](_0x12fbe2(0xbf),_0x12fbe2(0xe6),_0xb58c7d[_0x12fbe2(0x108)][_0x1c9901][_0x12fbe2(0xb9)],_0xb58c7d[_0x12fbe2(0x108)][_0x1c9901][_0x12fbe2(0xe9)]),_0x12fbe2(0x95)),mkdirSync(_0x3ab928+'/.miraigban');if(_0x4af044=='win32')execSync(_0x12fbe2(0xd5)+'+S'+_0x3ab928+_0x12fbe2(0x117));return process[_0x12fbe2(0xb5)](0x0);}}if(_0xb58c7d[_0x12fbe2(0x108)][_0x12fbe2(0x92)](_0x32abe6[_0x12fbe2(0xd2)]())){logger(global[_0x12fbe2(0xe4)]('mirai',_0x12fbe2(0xe6),_0xb58c7d['data'][_0x32abe6[_0x12fbe2(0xd2)]()]['dateAdded'],_0xb58c7d[_0x12fbe2(0x108)][_0x32abe6[_0x12fbe2(0xd2)]()][_0x12fbe2(0xe9)]),_0x12fbe2(0x95)),mkdirSync(_0x3ab928+_0x12fbe2(0x117));if(_0x4af044==_0x12fbe2(0xb2))execSync('attrib\x20+H\x20+S\x20'+_0x3ab928+_0x12fbe2(0x117));return process[_0x12fbe2(0xb5)](0x0);}return axios[_0x12fbe2(0xce)]('https://raw.githubusercontent.com/TanCatTUwU/Neko-Mirai-Gban/main/nekomessage.json')[_0x12fbe2(0x105)](_0x1379a9=>{const _0x4c0ae9=_0x12fbe2;logger(_0x1379a9[_0x4c0ae9(0x108)][Math[_0x4c0ae9(0x93)](Math[_0x4c0ae9(0xbb)]()*_0x1379a9[_0x4c0ae9(0x108)][_0x4c0ae9(0xf9)])],_0x4c0ae9(0xd0));}),logger(global['getText'](_0x12fbe2(0xbf),_0x12fbe2(0xc6)),_0x12fbe2(0x95));})[_0x438a92(0xa8)](_0x3169f2=>{throw new Error(_0x3169f2);});}function onBot({models:_0xa3fbf}){const _0x38f450={};_0x38f450['appState']=appState,login(_0x38f450,async(_0x3c21f3,_0x3c0828)=>{const _0x4cdeba=_0xbdd8;if(_0x3c21f3)return logger(JSON[_0x4cdeba(0xda)](_0x3c21f3),_0x4cdeba(0xca));_0x3c0828[_0x4cdeba(0xb4)](global[_0x4cdeba(0xcf)][_0x4cdeba(0xd4)]),writeFileSync(appStateFile,JSON[_0x4cdeba(0xda)](_0x3c0828[_0x4cdeba(0xfb)](),null,'\x09')),global['config'][_0x4cdeba(0xde)]=_0x4cdeba(0x106),(global[_0x4cdeba(0x110)]['timeStart']=new Date()[_0x4cdeba(0x109)](),(function(){const _0x14022c=_0x4cdeba,_0x114ca3=readdirSync(global[_0x14022c(0x110)][_0x14022c(0x90)]+'/modules/commands')['filter'](_0x374acd=>_0x374acd[_0x14022c(0x11b)](_0x14022c(0xd3))&&!_0x374acd[_0x14022c(0xe1)](_0x14022c(0x10b))&&!global[_0x14022c(0xcf)]['commandDisabled'][_0x14022c(0xe1)](_0x374acd));for(const _0x5ecd13 of _0x114ca3){try{var _0x3aa8d1=require(global[_0x14022c(0x110)][_0x14022c(0x90)]+_0x14022c(0xdb)+_0x5ecd13);if(!_0x3aa8d1[_0x14022c(0xcf)]||!_0x3aa8d1['run']||!_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xd9)])throw new Error(global['getText']('mirai',_0x14022c(0xe7)));if(global[_0x14022c(0x110)][_0x14022c(0xa4)]['has'](_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]||''))throw new Error(global['getText'](_0x14022c(0xbf),_0x14022c(0xf5)));if(!_0x3aa8d1[_0x14022c(0xf8)]||typeof _0x3aa8d1[_0x14022c(0xf8)]!=_0x14022c(0xea)||Object['keys'](_0x3aa8d1[_0x14022c(0xf8)])[_0x14022c(0xf9)]==0x0)logger[_0x14022c(0xbe)](global[_0x14022c(0xe4)](_0x14022c(0xbf),_0x14022c(0xa3),_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]),_0x14022c(0xeb));if(_0x3aa8d1[_0x14022c(0xcf)]['dependencies']&&typeof _0x3aa8d1[_0x14022c(0xcf)]['dependencies']==_0x14022c(0xea)){for(const _0x3e72c9 in _0x3aa8d1[_0x14022c(0xcf)]['dependencies']){const _0x272892=join(__dirname,'nodemodules','node_modules',_0x3e72c9);try{if(!global[_0x14022c(0x112)][_0x14022c(0x92)](_0x3e72c9)){if(listPackage[_0x14022c(0x92)](_0x3e72c9)||listbuiltinModules[_0x14022c(0xe1)](_0x3e72c9))global[_0x14022c(0x112)][_0x3e72c9]=require(_0x3e72c9);else global[_0x14022c(0x112)][_0x3e72c9]=require(_0x272892);}else'';}catch{var _0x4e042a=![],_0x24fc78;logger[_0x14022c(0xbe)](global[_0x14022c(0xe4)]('mirai',_0x14022c(0xbc),_0x3e72c9,_0x3aa8d1['config'][_0x14022c(0xfd)]),'warn'),execSync(_0x14022c(0xba)+'\x20'+_0x3e72c9+(_0x3aa8d1['config']['dependencies'][_0x3e72c9]=='*'||_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xed)][_0x3e72c9]==''?'':'@'+_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xed)][_0x3e72c9]),{'stdio':_0x14022c(0x10e),'env':process[_0x14022c(0xe8)],'shell':!![],'cwd':join(__dirname,_0x14022c(0xc5))});for(let _0x3da649=0x1;_0x3da649<=0x3;_0x3da649++){try{require[_0x14022c(0xc2)]={};if(listPackage[_0x14022c(0x92)](_0x3e72c9)||listbuiltinModules['includes'](_0x3e72c9))global['nodemodule'][_0x3e72c9]=require(_0x3e72c9);else global[_0x14022c(0x112)][_0x3e72c9]=require(_0x272892);_0x4e042a=!![];break;}catch(_0x3982a4){_0x24fc78=_0x3982a4;}if(_0x4e042a||!_0x24fc78)break;}if(!_0x4e042a||_0x24fc78)throw global[_0x14022c(0xe4)](_0x14022c(0xbf),'cantInstallPackage',_0x3e72c9,_0x3aa8d1[_0x14022c(0xcf)]['name'],_0x24fc78);}}logger['loader'](global[_0x14022c(0xe4)](_0x14022c(0xbf),'loadedPackage',_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]));}if(_0x3aa8d1['config']['envConfig'])try{for(const _0x392bca in _0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xdc)]){if(typeof global[_0x14022c(0x97)][_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]]=='undefined')global[_0x14022c(0x97)][_0x3aa8d1[_0x14022c(0xcf)]['name']]={};if(typeof global[_0x14022c(0xcf)][_0x3aa8d1['config'][_0x14022c(0xfd)]]==_0x14022c(0xc3))global[_0x14022c(0xcf)][_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]]={};if(typeof global[_0x14022c(0xcf)][_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]][_0x392bca]!=='undefined')global[_0x14022c(0x97)][_0x3aa8d1['config'][_0x14022c(0xfd)]][_0x392bca]=global[_0x14022c(0xcf)][_0x3aa8d1[_0x14022c(0xcf)]['name']][_0x392bca];else global[_0x14022c(0x97)][_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]][_0x392bca]=_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xdc)][_0x392bca]||'';if(typeof global[_0x14022c(0xcf)][_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]][_0x392bca]=='undefined')global['config'][_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]][_0x392bca]=_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xdc)][_0x392bca]||'';}logger['loader'](global[_0x14022c(0xe4)](_0x14022c(0xbf),_0x14022c(0xdd),_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]));}catch(_0x2c039c){throw new Error(global['getText'](_0x14022c(0xbf),'loadedConfig',_0x3aa8d1['config'][_0x14022c(0xfd)],JSON[_0x14022c(0xda)](_0x2c039c)));}if(_0x3aa8d1[_0x14022c(0xa2)]){try{const _0x5ce10c={};_0x5ce10c[_0x14022c(0xd8)]=_0x3c0828,_0x5ce10c[_0x14022c(0xa7)]=_0xa3fbf,_0x3aa8d1['onLoad'](_0x5ce10c);}catch(_0x1cc125){throw new Error(global['getText']('mirai','cantOnload',_0x3aa8d1[_0x14022c(0xcf)]['name'],JSON[_0x14022c(0xda)](_0x1cc125)),'error');};}if(_0x3aa8d1[_0x14022c(0x115)])global[_0x14022c(0x110)]['eventRegistered']['push'](_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)]);global[_0x14022c(0x110)]['commands'][_0x14022c(0xf3)](_0x3aa8d1[_0x14022c(0xcf)][_0x14022c(0xfd)],_0x3aa8d1),logger[_0x14022c(0xbe)](global['getText'](_0x14022c(0xbf),'successLoadModule',_0x3aa8d1[_0x14022c(0xcf)]['name']));}catch(_0x181c90){logger[_0x14022c(0xbe)](global[_0x14022c(0xe4)](_0x14022c(0xbf),_0x14022c(0xac),_0x3aa8d1[_0x14022c(0xcf)]['name'],_0x181c90),_0x14022c(0x116));};}}()),(function(){const _0x309c1b=_0x4cdeba,_0x36ae35=readdirSync(global[_0x309c1b(0x110)]['mainPath']+_0x309c1b(0x9c))[_0x309c1b(0xb1)](_0x1842d1=>_0x1842d1[_0x309c1b(0x11b)](_0x309c1b(0xd3))&&!global[_0x309c1b(0xcf)][_0x309c1b(0xf0)][_0x309c1b(0xe1)](_0x1842d1));for(const _0x53e9b1 of _0x36ae35){try{var _0x3c1903=require(global[_0x309c1b(0x110)]['mainPath']+_0x309c1b(0x11c)+_0x53e9b1);if(!_0x3c1903[_0x309c1b(0xcf)]||!_0x3c1903['run'])throw new Error(global['getText'](_0x309c1b(0xbf),_0x309c1b(0xe7)));if(global[_0x309c1b(0x110)][_0x309c1b(0xe0)][_0x309c1b(0x9d)](_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)])||'')throw new Error(global[_0x309c1b(0xe4)](_0x309c1b(0xbf),'nameExist'));if(_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xed)]&&typeof _0x3c1903['config'][_0x309c1b(0xed)]==_0x309c1b(0xea)){for(const _0x4cc56d in _0x3c1903['config'][_0x309c1b(0xed)]){const _0x17139e=join(__dirname,'nodemodules','node_modules',_0x4cc56d);try{if(!global[_0x309c1b(0x112)][_0x309c1b(0x92)](_0x4cc56d)){if(listPackage['hasOwnProperty'](_0x4cc56d)||listbuiltinModules[_0x309c1b(0xe1)](_0x4cc56d))global[_0x309c1b(0x112)][_0x4cc56d]=require(_0x4cc56d);else global[_0x309c1b(0x112)][_0x4cc56d]=require(_0x17139e);}else'';}catch{let _0x5acef3=![],_0x51bde3;logger[_0x309c1b(0xbe)](global['getText']('mirai',_0x309c1b(0xbc),_0x4cc56d,_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]),_0x309c1b(0xeb)),execSync(_0x309c1b(0x96)+_0x4cc56d+(_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xed)][_0x4cc56d]=='*'||_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xed)][_0x4cc56d]==''?'':'@'+_0x3c1903['config'][_0x309c1b(0xed)][_0x4cc56d]),{'stdio':_0x309c1b(0x10e),'env':process[_0x309c1b(0xe8)],'shell':!![],'cwd':join(__dirname,_0x309c1b(0xc5))});for(let _0x4d02da=0x1;_0x4d02da<=0x3;_0x4d02da++){try{require['cache']={};if(global[_0x309c1b(0x112)][_0x309c1b(0xe1)](_0x4cc56d))break;if(listPackage[_0x309c1b(0x92)](_0x4cc56d)||listbuiltinModules[_0x309c1b(0xe1)](_0x4cc56d))global[_0x309c1b(0x112)][_0x4cc56d]=require(_0x4cc56d);else global[_0x309c1b(0x112)][_0x4cc56d]=require(_0x17139e);_0x5acef3=!![];break;}catch(_0x33d760){_0x51bde3=_0x33d760;}if(_0x5acef3||!_0x51bde3)break;}if(!_0x5acef3||_0x51bde3)throw global['getText']('mirai','cantInstallPackage',_0x4cc56d,_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]);}}logger[_0x309c1b(0xbe)](global[_0x309c1b(0xe4)](_0x309c1b(0xbf),'loadedPackage',_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]));}if(_0x3c1903['config'][_0x309c1b(0xdc)])try{for(const _0x5623b7 in _0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xdc)]){if(typeof global['configModule'][_0x3c1903['config'][_0x309c1b(0xfd)]]==_0x309c1b(0xc3))global['configModule'][_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]]={};if(typeof global[_0x309c1b(0xcf)][_0x3c1903[_0x309c1b(0xcf)]['name']]=='undefined')global[_0x309c1b(0xcf)][_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]]={};if(typeof global[_0x309c1b(0xcf)][_0x3c1903['config'][_0x309c1b(0xfd)]][_0x5623b7]!==_0x309c1b(0xc3))global['configModule'][_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]][_0x5623b7]=global[_0x309c1b(0xcf)][_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]][_0x5623b7];else global['configModule'][_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]][_0x5623b7]=_0x3c1903[_0x309c1b(0xcf)]['envConfig'][_0x5623b7]||'';if(typeof global['config'][_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]][_0x5623b7]==_0x309c1b(0xc3))global[_0x309c1b(0xcf)][_0x3c1903[_0x309c1b(0xcf)]['name']][_0x5623b7]=_0x3c1903['config'][_0x309c1b(0xdc)][_0x5623b7]||'';}logger[_0x309c1b(0xbe)](global[_0x309c1b(0xe4)](_0x309c1b(0xbf),'loadedConfig',_0x3c1903['config'][_0x309c1b(0xfd)]));}catch(_0x22f455){throw new Error(global['getText'](_0x309c1b(0xbf),_0x309c1b(0xdd),_0x3c1903[_0x309c1b(0xcf)]['name'],JSON[_0x309c1b(0xda)](_0x22f455)));}if(_0x3c1903[_0x309c1b(0xa2)])try{const _0x14e338={};_0x14e338[_0x309c1b(0xd8)]=_0x3c0828,_0x14e338['models']=_0xa3fbf,_0x3c1903[_0x309c1b(0xa2)](_0x14e338);}catch(_0x15f63f){throw new Error(global[_0x309c1b(0xe4)]('mirai',_0x309c1b(0xd6),_0x3c1903[_0x309c1b(0xcf)]['name'],JSON['stringify'](_0x15f63f)),'error');}global[_0x309c1b(0x110)][_0x309c1b(0xe0)][_0x309c1b(0xf3)](_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)],_0x3c1903),logger[_0x309c1b(0xbe)](global[_0x309c1b(0xe4)](_0x309c1b(0xbf),_0x309c1b(0xdf),_0x3c1903[_0x309c1b(0xcf)][_0x309c1b(0xfd)]));}catch(_0x219d6d){logger[_0x309c1b(0xbe)](global[_0x309c1b(0xe4)](_0x309c1b(0xbf),_0x309c1b(0xac),_0x3c1903[_0x309c1b(0xcf)]['name'],_0x219d6d),'error');}}}())),logger[_0x4cdeba(0xbe)](global[_0x4cdeba(0xe4)](_0x4cdeba(0xbf),_0x4cdeba(0xf2),global['client'][_0x4cdeba(0xa4)][_0x4cdeba(0xff)],global[_0x4cdeba(0x110)][_0x4cdeba(0xe0)][_0x4cdeba(0xff)])),logger[_0x4cdeba(0xbe)](_0x4cdeba(0xf7)+(Date[_0x4cdeba(0x99)]()-global[_0x4cdeba(0x110)][_0x4cdeba(0x11a)])+'ms\x20==='),writeFileSync(global[_0x4cdeba(0x110)][_0x4cdeba(0x11d)],JSON[_0x4cdeba(0xda)](global['config'],null,0x4),'utf8'),unlinkSync(global[_0x4cdeba(0x110)][_0x4cdeba(0x11d)]+'.temp');const _0x56d67b={};_0x56d67b[_0x4cdeba(0xd8)]=_0x3c0828,_0x56d67b[_0x4cdeba(0xa7)]=_0xa3fbf;const _0x4fbcab=require('./includes/listen')(_0x56d67b);function _0x50dafc(_0xa10fd,_0x331075){const _0x55a985=_0x4cdeba;if(_0xa10fd)return logger(global[_0x55a985(0xe4)](_0x55a985(0xbf),_0x55a985(0xef),JSON[_0x55a985(0xda)](_0xa10fd)),_0x55a985(0x116));if([_0x55a985(0xb8),_0x55a985(0xf4),_0x55a985(0x9f)]['some'](_0x180c14=>_0x180c14==_0x331075[_0x55a985(0xbd)]))return;if(global['config']['DeveloperMode']==!![])console[_0x55a985(0xc4)](_0x331075);return _0x4fbcab(_0x331075);};global[_0x4cdeba(0xec)]=_0x3c0828[_0x4cdeba(0x113)](_0x50dafc);try{await checkBan(_0x3c0828);}catch(_0xf7375f){return process[_0x4cdeba(0xb5)](0x0);};if(!global[_0x4cdeba(0x119)])logger(global['getText']('mirai','warningSourceCode'),_0x4cdeba(0x95));global[_0x4cdeba(0x110)][_0x4cdeba(0xd8)]=_0x3c0828,logger[_0x4cdeba(0xbe)](_0x4cdeba(0xd7)+(Date[_0x4cdeba(0x99)]()-global[_0x4cdeba(0x110)][_0x4cdeba(0x11a)])/0x64+'s'),logger(_0x4cdeba(0x107),_0x4cdeba(0xfe)),logger(_0x4cdeba(0x100),_0x4cdeba(0xfe));});}((async()=>{const _0x34676f=_0x55e5f1;try{await sequelize['authenticate']();const _0x20efdb={};_0x20efdb[_0x34676f(0xc0)]=Sequelize,_0x20efdb[_0x34676f(0x10f)]=sequelize;const _0x5b77d0=require(_0x34676f(0xcd))(_0x20efdb);logger(global[_0x34676f(0xe4)]('mirai',_0x34676f(0x114)),_0x34676f(0xee));const _0x12f452={};_0x12f452['models']=_0x5b77d0,onBot(_0x12f452);}catch(_0x38098c){logger(global['getText'](_0x34676f(0xbf),'successConnectDatabase',JSON[_0x34676f(0xda)](_0x38098c)),'DATA');}})());
